<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head> 

<p>This is the host page</p>
<p id="currentlyPlaying">{{currentlyPlaying}}</p>

<script>
    var n = 1
    var songs = []
    var url = window.location.href.split("?")[1].replace("auth=", "")
    setInterval(() => {
        $.ajax({
            url: "/querySongs",
            type: "GET",
            success: function(result) {
                console.log(result)
            },
            error:function(error) {
                console.log(`Error ${error}`)
            }
        })
    }, 5000)

    setInterval(() => {
        $.ajax({
            url: 'https://api.spotify.com/v1/me/player/add-to-queue\?uri=' + "spotify:track:0nbXyq5TXYPCO7pr3N8S4I".replace(":", "%3A"),
            type: "POST",
            headers: {
                'Authorization': 'Bearer ' + url
            },
            success: function(response) {
                console.log(response)
            },
            error: function(error){
                console.log(`Error ${error.statusText}`)
            }
        });
    });
</script>